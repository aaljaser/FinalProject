<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: hsl(0deg 0% 0% / 0.25);
      --secondary-color: rgb(185, 183, 175);
      --background-color: white;
      --box-shadow-color: rgba(0, 0, 0, 0.1);
      --border-radius: 12px;
      --transition-duration: 600ms;
      --transition-timing-function: cubic-bezier(.3, .7, .4, 1);
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      background: linear-gradient(-45deg, #ee7752, #4e786d, #396474, #101110bc);
      background-size: 400% 400%;
      animation: gradient 6s ease infinite;
      text-align: center;
      font-family: 'Noto Sans Arabic', 'Montserrat Alternates', sans-serif;
    }

    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .top {
      padding: 10px;
      text-align: center;
    }

    svg.logo {
      width: 160px;
      height: 160px;
      display: block;
      margin: 0 auto;
    }

    .story-section {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      text-align: right;
      direction: rtl;
      font-size: 1.1rem;
      line-height: 1.6;
      display: none;
    }

    .story-section.active {
      display: block;
    }

    .story-section h2 {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 15px;
    }

    .story-section p {
      margin: 10px 0;
    }

    .v {
      text-align: center;
      border-radius: 7px;
      padding: 8px;
      width: 60%;
      max-width: 360px;
      margin: 10px auto;
      display: block;
      border: 1px solid #ccc;
      font-size: 1.32em;
      outline: none;
    }

    .v::placeholder {
      color: #999;
    }

    .pushable {
      justify-self: center;
      position: relative;
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      outline-offset: 4px;
      transition: filter 250ms;
    }

    .shadow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 12px;
      background: hsl(0deg 0% 0% / 0.25);
      will-change: transform;
      transform: translateY(2px);
      transition: transform 600ms cubic-bezier(.3, .7, .4, 1);
    }

    .edge {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 12px;
      background: linear-gradient(to left, rgb(121, 121, 123) 0%, rgb(121, 121, 123) 8%, rgb(121, 121, 123) 92%, rgb(121, 121, 123) 100%);
    }

    .front {
      display: block;
      position: relative;
      padding: 6px 16px;
      border-radius: 12px;
      font-size: 1.25rem;
      color: white;
      background: rgb(138, 137, 141);
      will-change: transform;
      transform: translateY(-4px);
      transition: transform 600ms cubic-bezier(.3, .7, .4, 1);
    }

    .pushable:hover {
      filter: brightness(110%);
    }

    .pushable:hover .front {
      transform: translateY(-6px);
      transition: transform 250ms cubic-bezier(.3, .7, .4, 1.5);
    }

    .pushable:active .front {
      transform: translateY(-2px);
      transition: transform 34ms;
    }

    .pushable:hover .shadow {
      transform: translateY(4px);
      transition: transform 250ms cubic-bezier(.3, .7, .4, 1.5);
    }

    .pushable:active .shadow {
      transform: translateY(1px);
      transition: transform 34ms;
    }

    .pushable:focus:not(:focus-visible) {
      outline: none;
    }

    .search-form {
      margin-top: 5%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .search-results {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
    }

    .search-result {
      margin: 10px;
      background-color: gainsboro;
      border-radius: 0.25rem;
      box-shadow: 0 1rem 1rem -0.75rem #dfc8c0;
      padding: 10px;
      width: 300px;
      display: flex;
      align-items: flex-start;
    }

    .search-result--thumbnail {
      width: 80px;
      height: auto;
      margin-right: 10px;
    }

    .search-result--info {
      flex: 1;
      text-align: left;
    }

    .search-result--title {
      font-weight: bold;
      font-size: 1.1rem;
    }

    .search-result--authors {
      font-size: 0.9rem;
      color: #555;
    }

    .search-result--published {
      font-size: 0.8rem;
      color: #777;
    }

    .error {
      color: red;
      text-align: center;
      margin: 20px;
    }

    label {
      font-size: 0.9rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    footer {
      margin-top: 20px;
      padding: 10px;
      text-align: center;
      color: #333;
    }

    .message, .copyrights {
      font-size: 0.9rem;
    }

    .icon-container {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 15px;
      z-index: 1000;
    }

    .icon-button {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      transition: background 250ms;
    }

    .icon-button:hover {
      background: rgba(255, 255, 250, 1);
    }

    .icon-button svg {
      width: 24px;
      height: 24px;
    }

    @media (max-width: 768px) {
      .v {
        width: 90%;
      }
      .search-result {
        width: 80%;
      }
      .search-form {
        margin-top: 10%;
      }
      .story-section {
        margin: 10px;
        padding: 15px;
        font-size: 1rem;
      }
      .icon-container {
        top: 10px;
        right: 10px;
        gap: 10px;
      }
      .icon-button {
        width: 35px;
        height: 35px;
      }
      .icon-button svg {
        width: 20px;
        height: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="top">
    <svg class="logo" viewBox="0 0 160 160" width="160" height="160">
      <circle cx="80" cy="80" r="50" fill="#ccc" />
      <g transform="matrix(0.866, -0.5, 0.25, 0.433, 80, 80)">
        <path d="M 0,70 A 65,70 0 0,0 65,0 5,5 0 0,1 75,0 75,70 0 0,1 0,70Z" fill="#FFF">
          <animateTransform attributeName="transform" type="rotate" from="360 0 0" to="0 0 0" dur="1s" repeatCount="indefinite" />
        </path>
      </g>
      <path d="M 50,0 A 50,50 0 0,0 -50,0Z" transform="matrix(0.866, -0.5, 0.5, 0.866, 80, 80)" fill="#aaa" />
    </svg>
  </div>

  <div class="icon-container">
    <div class="icon-button" id="toggle-story">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path id="toggle-icon" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </div>
    <a href="https://docs.google.com/document/d/16Z93SulV4N3pqbRys4U_ri8-0W5WTzRovks6ZucW2jo/edit?usp=sharing" download class="icon-button">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 15V3m0 12l-4-4m4 4l4-4M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
      </svg>
    </a>
  </div>

  <div id="app">
    <main>
      <section class="story-section" id="story-content">
        <p><strong>نحن قوم أعزَّنا الله بالإسلام، فمهما ابتغينا العزَّة في غيره أذلَّنا الله</strong> — كلمات عمر بن الخطاب رضي الله عنه تُلخِّص حقيقةً تاريخيةً غُيِّبت عمدًا: أنَّ الحضارة الإسلامية كانت منارةَ العلم التي استمدَّ منها الغربُ أسسَ نهضته. فلماذا يُدرَّس نيوتن وغاليليو في مناهجنا، بينما يُنسى ابن الهيثم الذي سبقهم بقرون؟</p>
        <p>يُعدّ الحسن بن الهيثم (965-1040م)، المعروف في الغرب باسم <em>Alhazen</em>، أحد أعظم العلماء في التاريخ، ورائدًا في علم البصريات والمنهج العلمي. وُلد في البصرة وأمضى حياته في بغداد والقاهرة، حيث غيّر مسار العلوم بإسهاماته الخالدة.</p>
        <p>يُلقَّب بـ<em>أبي البصريات</em> بفضل كتابه <em>كتاب المناظر</em>، الذي وضع فيه أسس علم البصريات الحديث. فقد أثبت أن الضوء يسير في خطوط مستقيمة، وشرح انعكاسه وانكساره بدقة علمية غير مسبوقة. كما قدّم التفسير الصحيح للرؤية، مؤكدًا أن العين تتلقى الضوء من الأجسام، وليس العكس كما كان سائدًا في عصره.</p>
        <p>كان ابن الهيثم أول من طبّق المنهج العلمي القائم على التجربة والملاحظة قبل غاليليو بستة قرون. قولته الشهيرة: <em>"من طلب الحقيقة فليبدأ بالشك"</em> أصبحت أساسًا للبحث العلمي.</p>
        <p>عند المقارنة مع علماء الغرب، نجد أن غاليليو اعتمد على أعمال ابن الهيثم في تطوير التلسكوب، بينما استند نيوتن إلى تجاربه في دراسة الضوء وانكساره. أما كيبلر فقد بنى نظرياته البصرية على أبحاث ابن الهيثم.</p>
        <p>مع ذلك، ظل تأثير ابن الهيثم خفيًا في الغرب حتى ترجمات القرن الثالث عشر، بينما أهملنا نحن تراثه في مناهجنا التعليمية.</p>
        <p>ختامًا، إرث ابن الهيثم ليس مجرد صفحات من التاريخ، بل هو شعلة تنير طريقنا نحو استعادة الريادة العلمية. متى نعيد الاعتبار لهذا العالم العظيم الذي وضع اللبنات الأولى للعلوم الحديثة؟</p>
      </section>

      <form class="search-form" @submit.prevent="search">
        <label for="search-input">Search for a book</label>
        <input id="search-input" class="v" type="text" v-model.trim="searchTerm" placeholder="⌕ Type Author, book name, subject...">
        <button class="pushable">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Search</span>
        </button>
      </form>

      <div class="search-results" v-if="searchResults.length">
        <div class="search-result" v-for="book in searchResults" :key="book.id">
          <img class="search-result--thumbnail" :src="'http://books.google.com/books/content?id=' + book.id + '&printsec=frontcover&img=1&zoom=1&source=gbs_api'" alt="Book cover">
          <div class="search-result--info">
            <div class="search-result--title">{{ book.volumeInfo.title }}</div>
            <div v-if="book.volumeInfo.authors" class="search-result--authors">
              by {{ bookAuthors(book) }}
            </div>
            <div v-if="book.volumeInfo.publishedDate" class="search-result--published">
              Published {{ book.volumeInfo.publishedDate }}
            </div>
          </div>
        </div>
      </div>
      <p v-if="errorMessage" class="error">{{ errorMessage }}</p>
    </main>
  </div>

  <footer>
    <p class="message">Made by <span class="name">Abdulkareem Aljaser</span></p>
    <p class="copyrights">Copyright 2019</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.2.4/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.1/axios.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          searchTerm: '',
          searchResults: [],
          isLoading: false,
          errorMessage: ''
        };
      },
      methods: {
        search: _.debounce(function() {
          if (!this.searchTerm) {
            this.searchResults = [];
            this.errorMessage = '';
            return;
          }

          this.isLoading = true;
          this.errorMessage = '';

          axios.get(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(this.searchTerm)}`)
            .then(response => {
              this.searchResults = response.data.items || [];
            })
            .catch(e => {
              this.errorMessage = 'An error occurred while fetching the data.';
              console.error(e);
            })
            .finally(() => {
              this.isLoading = false;
            });
        }, 300),
        bookAuthors(book) {
          let authors = book.volumeInfo.authors || [];
          if (authors.length < 3) {
            return authors.join(', ');
          } else {
            return authors.slice(0, 2).join(', ') + ' and others';
          }
        }
      }
    });

    // Toggle story section
    const toggleButton = document.getElementById('toggle-story');
    const storyContent = document.getElementById('story-content');
    const toggleIcon = document.getElementById('toggle-icon');

    toggleButton.addEventListener('click', () => {
      storyContent.classList.toggle('active');
      if (storyContent.classList.contains('active')) {
        toggleIcon.setAttribute('d', 'M6 18L18 6M6 6l12 12'); // X icon
      } else {
        toggleIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16'); // Hamburger icon
      }
    });
  </script>
</body>
</html>
